# 📧 邮件客户端系统

一个基于Flask的Web邮件客户端，支持多个邮箱账户管理和邮件查看功能。

## ✨ 功能特性

- 📋 **邮箱列表管理**：显示所有可用的邮箱账户
- 📬 **邮件列表查看**：查看选中邮箱的所有邮件
- 📄 **邮件详情阅读**：支持文本和HTML格式的邮件内容查看
- 🔄 **自动刷新**：支持手动刷新邮件列表
- 📱 **响应式设计**：支持移动端和桌面端访问
- 🎨 **现代化UI**：美观的渐变色设计和流畅的动画效果

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install flask requests
```

### 2. 配置邮箱账户

确保 `email.txt` 文件存在，格式如下：
```bash
邮箱地址----x----refresh_token----client_id
```

示例：
```bash
example@outlook.com----x----your_refresh_token----your_client_id
```

### 3. 启动应用

```bash
python app.py
```

### 4. 访问应用

打开浏览器访问：http://localhost:5001

## 📖 使用指南

### 邮箱列表页面
- 显示所有已配置的邮箱账户
- 点击邮箱卡片或"查看邮件"按钮进入邮件列表

### 邮件列表页面
- 显示选中邮箱的所有邮件
- 支持设置显示邮件数量（20/50/100/200封）
- 点击邮件条目查看详细内容
- 使用"返回"按钮回到邮箱列表

### 邮件详情页面
- 显示邮件的完整信息（主题、发件人、日期等）
- 支持切换查看文本内容和HTML内容
- 提供复制和打印功能
- 面包屑导航，方便返回上级页面

## 🛠 技术架构

### 后端
- **Flask**：Web框架
- **EmailService**：邮件服务模块，处理IMAP连接和邮件解析
- **requests**：处理OAuth2认证

### 前端
- **原生JavaScript**：无需额外框架
- **现代CSS**：使用Grid和Flexbox布局
- **响应式设计**：支持多种屏幕尺寸

### API接口

| 接口 | 方法 | 描述 |
|------|------|------|
| `/api/mailboxes` | GET | 获取所有邮箱列表 |
| `/api/mailbox/{id}/emails` | GET | 获取指定邮箱的邮件列表 |
| `/api/mailbox/{id}/emails/{email_id}` | GET | 获取指定邮件的详细内容 |

### 页面路由

| 路由 | 描述 |
|------|------|
| `/` | 邮箱列表页面 |
| `/mailbox/{id}` | 邮件列表页面 |
| `/mailbox/{id}/email/{email_id}` | 邮件详情页面 |

## 🔧 配置说明

### email.txt 文件格式
```bash
邮箱地址----x----refresh_token----client_id
```

- **邮箱地址**：Outlook邮箱地址
- **refresh_token**：OAuth2刷新令牌
- **client_id**：Microsoft应用程序客户端ID

### 环境要求
- Python 3.6+
- Flask
- requests库
- 稳定的网络连接（用于IMAP访问）

## 🎨 界面预览

### 邮箱列表页面
- 卡片式布局显示所有邮箱
- 渐变色背景和现代化设计
- 邮箱头像和基本信息展示

### 邮件列表页面
- 表格式布局显示邮件列表
- 支持邮件预览和时间格式化
- 交互式操作和状态反馈

### 邮件详情页面
- 完整的邮件头信息展示
- 标签页切换查看不同格式内容
- 安全的HTML内容渲染

## 🔒 安全考虑

- HTML邮件内容在iframe中安全渲染
- API接口包含错误处理和状态码
- 敏感信息（如令牌）仅在服务端处理

## 📝 开发日志

- ✅ 重构应用架构，支持多邮箱管理
- ✅ 实现现代化的响应式UI设计
- ✅ 添加完整的错误处理和用户反馈
- ✅ 优化邮件内容解析和显示
- ✅ 添加打印和复制功能

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## �� 许可证

MIT License 