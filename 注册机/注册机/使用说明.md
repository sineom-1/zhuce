# Web邮件客户端使用说明

## 📋 概述

您已经成功创建了一个功能完整的Web邮件客户端！这个应用可以连接到您的Outlook邮箱，在浏览器中以现代化的界面查看和管理邮件。

## 🎯 主要功能

### ✅ 已实现功能
- 📧 **邮件列表展示**: 美观的邮件列表，显示发件人、主题、预览和时间
- 🔍 **实时搜索**: 支持按发件人、主题、内容搜索邮件
- 📖 **邮件详情**: 点击邮件查看完整内容，支持文本和HTML两种格式
- 📱 **响应式设计**: 完美适配桌面、平板和手机
- 🔄 **刷新功能**: 手动刷新获取最新邮件
- 🎨 **现代化UI**: 使用Bootstrap 5和Font Awesome图标

### 🚧 待扩展功能
- 邮件回复和转发
- 邮件删除和标记
- 邮件分页加载
- 附件下载
- 多账户支持

## 🚀 快速开始

### 1. 启动应用
```bash
# 推荐方式1：智能启动（从任意目录）
python run.py

# 推荐方式2：使用启动脚本（需在项目目录内）
python start_server.py

# 方式3：直接运行（需在项目目录内）
python app.py
```

### 2. 访问应用
打开浏览器访问：**http://localhost:5001**

> **💡 提示**: 如果5001端口被占用，启动脚本会自动寻找可用端口 (5002-5010)

## 💻 使用界面

### 邮件列表页面 (/)
- **头部**: 显示邮箱地址和邮件总数
- **搜索框**: 实时搜索邮件内容
- **刷新按钮**: 获取最新邮件
- **邮件列表**: 点击任意邮件查看详情

### 邮件详情页面 (/email/<id>)
- **返回按钮**: 回到邮件列表
- **邮件头部**: 显示主题和日期
- **元信息**: 发件人、日期、邮件ID
- **内容标签**: 在纯文本和HTML格式间切换
- **操作按钮**: 回复、转发、删除（功能待实现）

## 🔧 配置说明

### 邮箱配置
在 `app.py` 文件中的 `EMAIL_CONFIG` 配置：

```python
EMAIL_CONFIG = {
    'client_id': '你的应用客户端ID',
    'email': '你的邮箱地址',
    'refresh_token': '你的刷新令牌'
}
```

### 服务器配置
- **端口**: 5000 (可在app.py中修改)
- **主机**: 0.0.0.0 (允许外部访问)
- **调试模式**: 开启 (生产环境建议关闭)

## 📁 项目文件结构

```
注册机/注册机/
├── 📄 app.py              # Flask主应用
├── 📄 email_service.py    # 邮件服务类
├── 📄 start_server.py     # 启动脚本
├── 📄 test_email.py       # 测试脚本
├── 📄 requirements.txt    # Python依赖
├── 📄 README.md          # 项目文档
├── 📄 使用说明.md        # 使用说明
├── 📁 templates/         # HTML模板
│   ├── index.html        # 邮件列表页面
│   └── email_detail.html # 邮件详情页面
└── 📄 get_email.py       # 原始邮件脚本（参考）
```

## 🛠️ API接口

### 获取邮件列表
- **GET** `/api/emails?limit=50`
- **返回**: JSON格式的邮件列表

### 获取邮件详情
- **GET** `/api/emails/<email_id>`
- **返回**: 指定邮件的详细信息

## 🎨 界面特色

### 设计亮点
- 🎨 **渐变背景**: 现代化的紫色渐变主题
- 💫 **动画效果**: 悬停动画和过渡效果
- 📱 **响应式**: 自适应各种屏幕尺寸
- 🔍 **直观搜索**: 实时筛选邮件
- 📧 **未读标识**: 蓝色圆点标识未读邮件

### 交互体验
- ✨ 悬停时邮件项目向右滑动
- 🔄 加载状态显示旋转图标
- ❌ 错误状态友好提示
- 📖 邮件内容支持文本/HTML切换

## 🧪 测试功能

运行测试脚本验证配置：
```bash
python test_email.py
```

测试将验证：
- ✅ 访问令牌获取
- ✅ 邮件列表获取
- ✅ 邮件详情获取

## 🔒 安全注意事项

1. **令牌安全**: 不要将refresh_token提交到公共代码仓库
2. **网络安全**: 生产环境建议使用HTTPS
3. **访问控制**: 考虑添加身份验证机制

## 🐛 故障排除

### 常见问题

**问题**: 无法获取邮件
- **解决**: 检查refresh_token是否过期
- **解决**: 确认网络连接正常

**问题**: 邮件内容显示乱码
- **解决**: 检查邮件编码设置
- **解决**: 查看控制台错误信息

**问题**: 页面无法访问
- **解决**: 确认Flask服务器正在运行
- **解决**: 检查防火墙设置

**问题**: 端口被占用 (macOS常见)
- **解决**: 关闭"系统偏好设置 -> 共享 -> AirPlay接收器"
- **解决**: 使用智能启动脚本自动寻找可用端口: `python run.py`
- **解决**: 手动指定其他端口

**问题**: 目录错误或找不到文件
- **解决**: 使用智能启动脚本: `python run.py`
- **解决**: 确保在 `注册机/注册机/` 目录下运行
- **解决**: 检查文件是否存在: `app.py`, `email_service.py`

### 调试模式
启用调试模式查看详细错误：
```python
app.run(debug=True)
```

## 🎉 成功完成！

恭喜！您现在有了一个功能完整的Web邮件客户端，具备：

✅ 现代化的用户界面  
✅ 完整的邮件查看功能  
✅ 响应式设计  
✅ 实时搜索  
✅ 详细的文档说明  

您可以在此基础上继续扩展更多功能，如邮件发送、附件处理等。 